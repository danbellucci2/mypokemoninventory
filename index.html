<html><head><base href="/"><link rel="icon" type="image/png" href="/pokeball.png"><script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script><style>body {font-family: 'Poppins', sans-serif;margin: 0;padding: 20px;background: #f0f2f5;}.container {max-width: 1200px;margin: 0 auto;position: relative;padding: 0 20px;}.nav-tabs {display: flex;gap: 15px;margin-bottom: 25px;border-bottom: 3px solid #e0e4e8;padding-bottom: 10px;}.nav-tab {padding: 10px 20px;border: none;background: none;cursor: pointer;font-size: 1.2em;color: #4a5568;border-bottom: 3px solid transparent;margin-bottom: -10px;transition: all 0.3s ease;}.nav-tab.active {color: #4f46e5;border-bottom: 3px solid #4f46e5;font-weight: 600;}#pokemon-counter {font-size: 0.9em;color: #4f46e5;font-weight: normal;}.pokemon-grid {display: grid;grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));gap: 25px;margin: 30px 0;}.pokemon-card {position: relative;background: white;border-radius: 16px;padding: 20px;box-shadow: 0 4px 15px rgba(0,0,0,0.1);transition: all 0.4s ease;border: 2px solid #4f46e5;overflow: hidden;cursor: pointer;}.pokemon-card:hover {transform: translateY(-8px);border-color: #3730a3;box-shadow: 0 8px 25px rgba(79,70,229,0.2);}.pokemon-saved {position: absolute;top: 10px;left: 10px;display: flex;align-items: center;gap: 5px;font-size: 0.8em;color: #4a5568;cursor: pointer;}.pokemon-saved input[type="checkbox"] {width: 16px;height: 16px;cursor: pointer;}.pokemon-saved label {cursor: pointer;}.pokemon-export {position: absolute;top: 10px;right: 10px;display: flex;align-items: center;gap: 5px;font-size: 0.8em;color: #4a5568;cursor: pointer;}.pokemon-export input[type="checkbox"] {width: 16px;height: 16px;cursor: pointer;}.pokemon-export label {cursor: pointer;}.pokemon-select {position: absolute;top: 10px;right: 10px;width: 20px;height: 20px;cursor: pointer;z-index: 2;opacity: 1;}.pokemon-image {width: 100%;height: 150px;display: flex;justify-content: center;align-items: center;border-radius: 8px;}.pokemon-details {margin-top: 10px;position: relative;z-index: 1;transition: all 0.3s ease;}.pokemon-card:hover .pokemon-details {transform: translateY(-5px);}.pokemon-card:hover::after {content: '';position: absolute;bottom: 0;left: 0;right: 0;height: 60%;background: linear-gradient(to bottom, transparent, rgba(79,70,229,0.1));border-radius: 0 0 16px 16px;z-index: 0;}.pokemon-name {font-size: 1.2em;font-weight: bold;text-transform: capitalize;}.pokemon-types {display: flex;gap: 5px;margin-top: 5px;}.type-badge {padding: 5px 12px;border-radius: 20px;font-size: 0.9em;color: white;text-transform: uppercase;font-weight: 600;letter-spacing: 0.5px;box-shadow: 0 2px 5px rgba(0,0,0,0.1);}.modal {display: none;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.5);justify-content: center;align-items: center;z-index: 9999;} .modal-content {background: white;padding: 30px;border-radius: 20px;max-width: 800px;max-height: 90vh;overflow-y: auto;box-shadow: 0 10px 30px rgba(0,0,0,0.2);position: relative; z-index: 10000;} .pokemon-details-grid {display: grid;grid-template-columns: repeat(2, 1fr);gap: 20px;margin-top: 20px;}.detail-section {background: #f5f5f5;padding: 15px;border-radius: 8px;}.moves-list {display: grid;grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));gap: 10px;}.ability-card {background: white;padding: 10px;border-radius: 5px;margin: 5px 0;}.search-bar {padding: 8px 15px;border-radius: 8px;border: 2px solid #e0e4e8;font-size: 1em;transition: all 0.3s ease;box-shadow: 0 2px 10px rgba(0,0,0,0.05);width: 200px;margin: 0;}.search-bar:focus {border-color: #4f46e5;outline: none;box-shadow: 0 2px 15px rgba(79,70,229,0.2);}.loading {text-align: center;padding: 20px;}.pagination {display: flex;justify-content: center;gap: 10px;margin-top: 20px;}.pagination button {padding: 8px 15px;border: none;border-radius: 5px;background: #007bff;color: white;cursor: pointer;}.pagination button:disabled {background: #cccccc;cursor: not-allowed;}.limit-selector {margin: 20px 0;display: flex;gap: 10px;align-items: center;justify-content: flex-start;background: white;padding: 15px;border-radius: 12px;box-shadow: 0 2px 10px rgba(0,0,0,0.05);flex-wrap: wrap;}.limit-selector select {padding: 10px 15px;border-radius: 8px;border: 2px solid #e0e4e8;font-size: 1em;cursor: pointer;background: white;transition: all 0.3s ease;}.limit-selector select:focus {border-color: #4f46e5;outline: none;}.limit-selector button {padding: 10px 20px;background: linear-gradient(135deg, #4f46e5, #3730a3);color: white;border: none;border-radius: 8px;cursor: pointer;font-weight: 600;transition: all 0.3s ease;text-transform: uppercase;letter-spacing: 0.5px;}.limit-selector button:hover {transform: translateY(-2px);box-shadow: 0 4px 15px rgba(79,70,229,0.3);}.export-btn {padding: 10px 20px;background: linear-gradient(135deg, #4f46e5, #3730a3);color: white;border: none;border-radius: 8px;cursor: pointer;font-weight: 600;transition: all 0.3s ease;text-transform: uppercase;letter-spacing: 0.5px;}.export-btn:hover {transform: translateY(-2px);box-shadow: 0 4px 15px rgba(79,70,229,0.3);}.export-all-btn {padding: 10px 20px;background: linear-gradient(135deg, #3730a3, #1e1b4b);color: white;border: none;border-radius: 8px;cursor: pointer;font-weight: 600;transition: all 0.3s ease;text-transform: uppercase;letter-spacing: 0.5px;}.export-all-btn:hover {transform: translateY(-2px);box-shadow: 0 4px 15px rgba(79,70,229,0.3);}.type-filter {padding: 10px 15px;border-radius: 8px;border: 2px solid #e0e4e8;font-size: 1em;cursor: pointer;background: white;transition: all 0.3s ease;}.type-filter:focus {border-color: #4f46e5;outline: none;}.tab-content {display: none;}.tab-content.active {display: block;}@media (max-width: 768px) {.container {padding: 10px;}.limit-selector {flex-direction: column;gap: 15px;}.pokemon-grid {grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));gap: 15px;}.modal-content {margin: 20px;padding: 20px;}.pokemon-details-grid {grid-template-columns: 1fr;}}</style><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"></head><body><div class="container"><div class="nav-tabs"><button class="nav-tab active" data-tab="all">Pokémon Data Base</button><button class="nav-tab" data-tab="my">My Pokémons (<span id="pokemon-counter">0/0</span>)</button></div><div class="limit-selector"><label for="limitSelect">Pokémon per page:</label><select id="limitSelect"><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="all" selected>Show All</option></select><select class="type-filter"><option value="all">All Types</option><option value="bug">Bug</option><option value="dark">Dark</option><option value="dragon">Dragon</option><option value="electric">Electric</option><option value="fairy">Fairy</option><option value="fighting">Fighting</option><option value="fire">Fire</option><option value="flying">Flying</option><option value="ghost">Ghost</option><option value="grass">Grass</option><option value="ground">Ground</option><option value="ice">Ice</option><option value="normal">Normal</option><option value="poison">Poison</option><option value="psychic">Psychic</option><option value="rock">Rock</option><option value="steel">Steel</option><option value="water">Water</option></select><input type="text" class="search-bar" placeholder="Search Pokémon..."><button class="export-btn">Export Selected</button><button class="export-all-btn">Export All</button></div><div class="pokemon-grid"></div><div class="pagination"><button id="prevBtn" disabled>Previous</button><button id="nextBtn">Next</button></div></div><div class="modal"><div class="modal-content"><h2></h2><div class="pokemon-details"></div></div></div><script>let currentPage = 1;let limit = 20;let pokemonList = [];let filteredPokemonList = [];let myPokemon = JSON.parse(localStorage.getItem('myPokemon') || '[]');let activeTab = 'all';let isShowingAll = true;const typeColors = {normal: '#A8A878',fire: '#F08030',water: '#6890F0',electric: '#F8D030',grass: '#78C850',ice: '#98D8D8',fighting: '#C03028',poison: '#A040A0',ground: '#E0C068',flying: '#A890F0',psychic: '#F85888',bug: '#A8B820',rock: '#B8A038',ghost: '#705898',dragon: '#7038F8',dark: '#705848',steel: '#B8B8D0',fairy: '#EE99AC'};async function fetchPokemonList(offset = 0) {try {if (isShowingAll) {const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=1500');const data = await response.json();return data;}const response = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=${limit}&offset=${offset}`);const data = await response.json();return data;} catch (error) {console.error('Error fetching Pokemon list:', error);return null;}}async function fetchPokemonDetails(url) {try {const response = await fetch(url);const data = await response.json();return data;} catch (error) {console.error('Error fetching Pokemon details:', error);return null;}}async function fetchPokemonSpecies(id) {try {const response = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${id}`);return await response.json();} catch (error) {console.error('Error fetching species:', error);return null;}}async function fetchEvolutionChain(url) {try {const response = await fetch(url);return await response.json();} catch (error) {console.error('Error fetching evolution:', error);return null;}}async function fetchAbilityDetails(url) {try {const response = await fetch(url);return await response.json();} catch (error) {console.error('Error fetching ability:', error);return null;}}function savePokemon(pokemonId) {if (!myPokemon.includes(pokemonId)) {myPokemon.push(pokemonId);localStorage.setItem('myPokemon', JSON.stringify(myPokemon));updatePokemonCounter();}}function removePokemon(pokemonId) {myPokemon = myPokemon.filter(id => id !== pokemonId);localStorage.setItem('myPokemon', JSON.stringify(myPokemon));updatePokemonCounter();}function createPokemonCard(pokemon) {if (!pokemon || !pokemon.sprites || !pokemon.types) {console.error('Invalid pokemon data:', pokemon);return document.createElement('div');}const card = document.createElement('div');card.className = 'pokemon-card';const isSaved = myPokemon.includes(pokemon.id);const saveDiv = document.createElement('div');saveDiv.className = 'pokemon-saved';const ownedCheckbox = document.createElement('input');ownedCheckbox.type = 'checkbox';ownedCheckbox.checked = isSaved;ownedCheckbox.id = `owned_check_box-${pokemon.id}`;const ownedLabel = document.createElement('label');ownedLabel.htmlFor = `owned_check_box-${pokemon.id}`;ownedLabel.textContent = 'Owned';saveDiv.appendChild(ownedCheckbox);saveDiv.appendChild(ownedLabel);const exportDiv = document.createElement('div');exportDiv.className = 'pokemon-export';const exportCheckbox = document.createElement('input');exportCheckbox.type = 'checkbox';exportCheckbox.id = `export_check_box-${pokemon.id}`;const exportLabel = document.createElement('label');exportLabel.htmlFor = `export_check_box-${pokemon.id}`;exportLabel.textContent = 'Export';exportDiv.appendChild(exportCheckbox);exportDiv.appendChild(exportLabel);card.appendChild(saveDiv);card.appendChild(exportDiv);ownedCheckbox.onclick = (e) => {e.stopPropagation();if (ownedCheckbox.checked) {savePokemon(pokemon.id);} else {removePokemon(pokemon.id);}if (activeTab === 'my') {displayPokemon(getMyPokemon());}};const types = pokemon.types.map(type => {const typeColor = typeColors[type.type.name] || '#777777';return `<span class="type-badge" style="background-color: ${typeColor}">${type.type.name}</span>`;}).join('');const imageUrl = pokemon.sprites.front_default || 'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png';const contentDiv = document.createElement('div');contentDiv.innerHTML = `<div class="pokemon-image"><img src="${imageUrl}" alt="${pokemon.name}" width="96" height="96"></div><div class="pokemon-details"><div class="pokemon-name">#${pokemon.id} ${pokemon.name}</div><div class="pokemon-types">${types}</div></div>`;card.appendChild(contentDiv);card.addEventListener('click', (e) => {if (!e.target.classList.contains('pokemon-select') && !e.target.classList.contains('pokemon-saved') && !e.target.id.includes('export_check_box')) {showPokemonModal(pokemon);}});return card;}function getMyPokemon() {return pokemonList.filter(pokemon => myPokemon.includes(pokemon.id));}function updatePokemonCounter() {const ownedCount = myPokemon.length;const totalCount = pokemonList.length;document.getElementById('pokemon-counter').textContent = `${ownedCount}/${totalCount}`;}window.showPokemonModal = async function(pokemon) {const modal = document.querySelector('.modal');const modalContent = modal.querySelector('.modal-content');modalContent.innerHTML = '<div class="loading">Loading additional details...</div>';modal.style.display = 'flex';try {let species = null;let evolutionChain = null;try {species = await fetchPokemonSpecies(pokemon.id);if (species && species.evolution_chain) {evolutionChain = await fetchEvolutionChain(species.evolution_chain.url);}} catch (error) {console.warn('Could not fetch species or evolution data:', error);}const abilities = await Promise.all(pokemon.abilities.map(async (a) => {try {return await fetchAbilityDetails(a.ability.url);} catch (error) {console.warn(`Could not fetch ability details for ${a.ability.name}:`, error);return {name: a.ability.name,effect_entries: [{ effect: 'Description not available', language: { name: 'en' } }]};}}));const types = pokemon.types.map(type => {const typeColor = typeColors[type.type.name] || '#777777';return `<span class="type-badge" style="background-color: ${typeColor}">${type.type.name}</span>`;}).join('');const abilitiesHtml = abilities.map(ability => `<div class="ability-card"><h4>${ability.name}</h4><p>${ability.effect_entries.find(e => e.language.name === 'en')?.effect || 'No description available'}</p></div>`).join('');const movesHtml = pokemon.moves.slice(0, 20).map(move => `<div class="move-card">${move.move.name}</div>`).join('');modalContent.innerHTML = `<h2>#${pokemon.id} ${pokemon.name}</h2><div class="pokemon-details-grid"><div class="detail-section"><div class="pokemon-image"><img src="${pokemon.sprites.front_default || ''}" alt="${pokemon.name}" width="150" height="150" onerror="this.src='https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png'"></div><div class="pokemon-types">${types}</div><div>Height: ${pokemon.height / 10}m</div><div>Weight: ${pokemon.weight / 10}kg</div></div><div class="detail-section"><h3>Base Stats:</h3>${pokemon.stats.map(stat => `<div>${stat.stat.name}: ${stat.base_stat}</div>`).join('')}</div><div class="detail-section"><h3>Abilities:</h3>${abilitiesHtml}</div><div class="detail-section"><h3>Moves (first 20):</h3><div class="moves-list">${movesHtml}</div></div></div>`;} catch (error) {console.error('Error loading details:', error);modalContent.innerHTML = `<h2>Error Loading Details</h2><div class="error"><p>Sorry, we couldn't load the complete details for ${pokemon.name}.</p><p>Basic Information:</p><div class="pokemon-image"><img src="${pokemon.sprites.front_default || ''}" alt="${pokemon.name}" width="150" height="150" onerror="this.src='https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png'"></div><p>Name: ${pokemon.name}</p><p>ID: #${pokemon.id}</p></div>`;}};document.querySelector('.modal').addEventListener('click', (event) => {if (event.target.className === 'modal') {event.target.style.display = 'none';}});document.addEventListener('keydown', (event) => {if (event.key === 'Escape') {const modal = document.querySelector('.modal');modal.style.display = 'none';}});const searchBar = document.querySelector('.search-bar');const typeFilter = document.querySelector('.type-filter');typeFilter.addEventListener('change', (e) => {const selectedType = e.target.value;if (selectedType === 'all') {filteredPokemonList = pokemonList;} else {filteredPokemonList = pokemonList.filter(pokemon => pokemon.types.some(type => type.type.name === selectedType));}displayPokemon(filteredPokemonList);});searchBar.addEventListener('input', (e) => {const searchTerm = e.target.value.toLowerCase();const selectedType = typeFilter.value;filteredPokemonList = pokemonList.filter(pokemon => {const matchesSearch = pokemon.name.toLowerCase().includes(searchTerm);const matchesType = selectedType === 'all' || pokemon.types.some(type => type.type.name === selectedType);return matchesSearch && matchesType;});displayPokemon(filteredPokemonList);});function displayPokemon(pokemonToDisplay) {const grid = document.querySelector('.pokemon-grid');grid.innerHTML = '';pokemonToDisplay.filter(pokemon => pokemon !== null).forEach(pokemon => {grid.appendChild(createPokemonCard(pokemon));});}async function loadPokemon(page = 1) {const grid = document.querySelector('.pokemon-grid');grid.innerHTML = '<div class="loading">Loading...</div>';const offset = (page - 1) * limit;const pokemonListData = await fetchPokemonList(offset);if (!pokemonListData) {grid.innerHTML = '<div class="loading">Error loading Pokemon. Please try again.</div>';return;}const pokemonDetailsPromises = pokemonListData.results.map(async pokemon => {try {return await fetchPokemonDetails(pokemon.url);} catch (error) {console.error('Error fetching Pokemon details:', error);return null;}});pokemonList = await Promise.all(pokemonDetailsPromises);filteredPokemonList = pokemonList.filter(pokemon => pokemon !== null);displayPokemon(filteredPokemonList);updatePokemonCounter();document.getElementById('prevBtn').disabled = page === 1;document.getElementById('nextBtn').disabled = isShowingAll || !pokemonListData.next;}document.querySelectorAll('.nav-tab').forEach(tab => {tab.addEventListener('click', async (e) => {document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));e.target.classList.add('active');activeTab = e.target.dataset.tab;if (activeTab === 'my') {displayPokemon(getMyPokemon());} else {currentPage = 1;loadPokemon(1);}});});document.getElementById('prevBtn').addEventListener('click', () => {if (currentPage > 1) {currentPage--;loadPokemon(currentPage);}});document.getElementById('nextBtn').addEventListener('click', () => {currentPage++;loadPokemon(currentPage);});document.getElementById('limitSelect').addEventListener('change', (e) => {const selectedValue = e.target.value;if (selectedValue === 'all') {isShowingAll = true;document.querySelector('.pagination').style.display = 'none';} else {isShowingAll = false;limit = parseInt(selectedValue);document.querySelector('.pagination').style.display = 'flex';}currentPage = 1;loadPokemon(currentPage);});function exportPokemonToExcel(pokemonList) {try {const exportData = pokemonList.map(pokemon => ({id: pokemon.id,name: pokemon.name,owned: myPokemon.includes(pokemon.id) ? 'Yes' : 'No',types: pokemon.types.map(t => t.type.name).join(';'),height: pokemon.height / 10,weight: pokemon.weight / 10,base_hp: pokemon.stats[0].base_stat,base_attack: pokemon.stats[1].base_stat,base_defense: pokemon.stats[2].base_stat,base_special_attack: pokemon.stats[3].base_stat,base_special_defense: pokemon.stats[4].base_stat,base_speed: pokemon.stats[5].base_stat,abilities: pokemon.abilities.map(a => a.ability.name).join(';')}));const wb = XLSX.utils.book_new();const ws = XLSX.utils.json_to_sheet(exportData);XLSX.utils.book_append_sheet(wb, ws, "Pokemon Data");const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });const url = URL.createObjectURL(blob);window.open(url, '_blank');setTimeout(() => {URL.revokeObjectURL(url);}, 1000);alert(`Successfully exported ${exportData.length} Pokemon!`);} catch (error) {console.error('Error during export:', error);alert('An error occurred while exporting Pokemon data. Please try again.');}}function exportSelectedPokemon() {const selectedPokemon = [];document.querySelectorAll('.pokemon-card').forEach(card => {const checkbox = card.querySelector('.pokemon-export input[type="checkbox"]');if (checkbox.checked) {const nameElement = card.querySelector('.pokemon-name');const name = nameElement.textContent.split(' ').slice(1).join(' ');const pokemon = pokemonList.find(p => p.name === name);if (pokemon) {selectedPokemon.push(pokemon);}}});if (selectedPokemon.length === 0) {alert('Please select at least one Pokemon to export');return;}exportPokemonToExcel(selectedPokemon);}document.querySelector('.export-btn').addEventListener('click', exportSelectedPokemon);document.querySelector('.export-all-btn').addEventListener('click', () => {exportPokemonToExcel(filteredPokemonList);});loadPokemon();</script></body></html>
